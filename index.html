<!DOCTYPE html>
<html lang="en">
<head>
  <title>Willow HD</title>
  <meta name="robots" content="noindex, nofollow">
  <meta name="referrer" content="no-referrer">
  <link rel="shortcut icon" href="">
  <style type="text/css">
      body, html {
          margin: 0;
          padding: 0;
          width: 100%;
          height: 100%;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: black;
      }
      #player {
          width: 100vw;
          height: 100vh;
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
      }
  </style>
  <script src="https://ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
      <script type="text/javascript">
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\[").replace(/[\]]/, "\]");
            var regex = new RegExp("[\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        var get = getParameterByName('get');
        var key = getParameterByName('key');
        var key2 = getParameterByName('key2');
        var getIMG = getParameterByName('img');
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          jwplayer.key = 'XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo';

          const m3u8Url = "https://p-cdn4-a-cg14-linear-cbd46b77.movetv.com/clipslist/22/20250303T194226Z/20250303T214226Z/master73_widevine.m3u8";
          const id = "willow";
          const encryptedToken = "QmVEVDlKa0c5TDNzTDBQK3ZwSDI0UmZyaDhrQXIrRG54VS9VcDJ3bjMySjNPZ2JwSjRWdEsyeVR3MzBTVHBJUg==";
          async function fetchClearKey(pssh) {
              try {
                  const response = await fetch("key.php", {
                      method: "POST",
                      headers: {
                          "Content-Type": "application/json"
                      },
                      body: JSON.stringify({
                          pssh: pssh,
                          id: id,
                          token: encryptedToken
                      })
                  });

                  if (!response.ok) {
                      return null;
                  }

                  const data = await response.json();
                  return data;
              } catch (error) {
                  return null;
              }
          }

          async function initializePlayer() {
              try {
                  const pssh = await fetchPSSHFromM3U8(m3u8Url);
                  const keys = await fetchClearKey(pssh);

                  jwplayer("player").setup({
                      playlist: [
                          {
                              sources: [
                                  {
                                      default: true,
                                      type: "dash",
                                      file: m3u8Url,
                                      drm: {
                                          clearkey: {
                                              keyId: keys.keyId,
                                              key: keys.key
                                          }
                                      },
                                      label: "HD"
                                  }
                              ]
                          }
                      ],
                      width: "100%",
                      height: "100%",
                      aspectratio: "16:9",
                      autostart: true
                  });
              } catch (error) {}
          }

          async function fetchPSSHFromM3U8(m3u8Url) {
              try {
                  const response = await fetch(m3u8Url);
                  if (!response.ok) {
                      return null;
                  }

                  const m3u8Text = await response.text();
                  const sessionKeyTag = m3u8Text.split("\n").find(line => 
                      line.startsWith("#EXT-X-SESSION-KEY") && 
                      line.includes('KEYFORMAT="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"')
                  );

                  if (!sessionKeyTag) {
                      return null;
                  }

                  const uriMatch = sessionKeyTag.match(/URI="data:text\/plain;base64,([^"]+)"/);
                  if (!uriMatch) {
                      return null;
                  }

                  return uriMatch[1];
              } catch (error) {
                  return null;
              }
          }
          initializePlayer();
      });
  </script>
</head>
<body>
  <div id="player"></div>
</body>
</html>
